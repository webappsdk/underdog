var UNDERDOG_PATH="";function setUnderdogPath(a){UNDERDOG_PATH=a}function loadIntoEl(a,b,c){lockScreen();CRUD.load(a,function(a){b.innerHTML=a;unlockScreen();U.un(c)||c()})}
function setLockerDisplay(a){var b=document.getElementById("locker");null==b?(a=document.createElement("div"),a.setAttribute("id","locker"),a.setAttribute("style","position:fixed;top:0px;left:0px;width:100%;height:100%;z-index:1000;background-color:rgba(0,0,128,0.1);"),b='<div id="messageslog" class="center"></div>',""!=UNDERDOG_PATH&&(b+='<img id="loader" src="'+UNDERDOG_PATH+'/images/loader.gif" class="margin-top:50%;" width=32 />'),a.innerHTML=b,document.body.appendChild(a)):b.style.display=a}
function lockScreen(){setLockerDisplay("block")}function unlockScreen(){setLockerDisplay("none")}function fadeOut(a,b,c){a.style.opacity=1;var d=setInterval(function(){.5<a.style.opacity?a.style.opacity-=.05:(clearInterval(d),c())},.05*b)}function U(){}U.mouseX=0;U.mouseY=0;U.oDLF=[];U.oMMF=[];U.un=function(a){if("undefined"==typeof a||null==a)return!0};U.escapeSpecialCharsRegExp=function(a){return a.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")};
U.type=function(a){return Array.isArray(a)?"array":"string"==typeof a?"string":null!=a&&"object"==typeof a?"object":"other"};
U.loadjs=function(a,b){if(!U.un(a))if(U.un(b)){var c=document.createElement("script");c.type="application/javascript";c.src=a;document.body.appendChild(c)}else{var d=document.createElement("script"),e=!1,f=document.getElementsByTagName("head")[0];d.onload=d.onreadystatechange=function(){e||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(e=!0,b(),d.onload=d.onreadystatechange=null,f&&d.parentNode&&f.removeChild(d))};d.setAttribute("type","text/javascript");d.setAttribute("src",
a);f.appendChild(d)}};U.onWindowLoad=function(a){"function"==typeof a?U.oDLF.push(a):console.alert("Only function can be called on document load.")};U.onMouseMove=function(a){"function"==typeof a?U.oMMF.push(a):console.alert("Only function can be called on mouse move.")};U.callFunctions=function(a,b){for(var c=0;c<a.length;c++)fn=a[c],"function"==typeof fn?fn(b):console.alert("Only functions can be called.")};window.onmousemove=function(a){U.callFunctions(U.oMMF,a)};
window.onload=function(a){U.callFunctions(U.oDLF,a)};U.onMouseMove(function(a){U.mouseX=a.clientX;U.mouseY=a.clientY});Promise.prototype["finally"]=function(a){return"function"!==typeof a?this.then():this.then(a,a)};function Tooltip(){}
Tooltip["new"]=function(a){if(null==document.getElementById(a)){var b=document.createElement("span");b.setAttribute("id","underdog-tooltip-"+a);b.setAttribute("style","border:2px solid #444;padding:5px;background-color:#fff;display:none;position:fixed;overflow:hidden;");document.body.appendChild(b)}};
Tooltip.show=function(a,b,c,d){a=document.getElementById("underdog-tooltip-"+a);null!=b&&(a.innerHTML=b);b=null;b=null==c?U.mouseX+30+"px":c+"px";a.style.left=b;c=null;c=null==d?U.mouseY+10+"px":d+"px";a.style.top=c;a.style.display="block"};Tooltip.hide=function(a){document.getElementById("underdog-tooltip-"+a).style.display="none"};function Message(){}Message.ICONS_ON_TYPE={success:"check",error:"exclamation",info:"lightbulb-o",warning:"warning"};
Message.getDiv=function(a,b){return'<div class="alert alert-'+a+'" role="alert"><i class="fa fa-'+Message.ICONS_ON_TYPE[a]+'"></i>&nbsp;'+b+"</div>"};Message.show=function(a,b,c){var d=document.getElementById("messageslog");d.innerHTML="";d.style.display="block";"error"==a&&(a="warning");hideLoader();d.innerHTML=Message.getDiv(a,b);b=1500;"error"==a&&(b=2500);fadeOut(d,b,function(){d.style.display="none";c()})};function Alert(){}Alert.textfield=function(a,b,c){a=prompt(a,b);null!=a&&c(a)};
Alert.yesno=function(a,b){var c=confirm(a);b(c)};function PH(){}PH.CACHED_CONFIGURATIONS_ID="PH.configurations";PH.CACHED_RESOURCES_ID="PH.resources";PH.EVENT_PLUGIN_JSON_FILE="plugins.json";PH.CACHED_DESCRIPTOR_ID="PH.descriptor";PH.LOAD_PH_AFTER_EVENT="load-ph-after";PH.root=null;PH.events={};
PH.load=function(a,b){CH(b);CH.parseObjects();PH.root=a;U.un(CH.cache(PH.CACHED_CONFIGURATIONS_ID))&&CH.cache(PH.CACHED_CONFIGURATIONS_ID,{});U.un(CH.cache(PH.CACHED_RESOURCES_ID))&&CH.cache(PH.CACHED_RESOURCES_ID,{});var c=function(a){(new Promise(function(b,c){for(var d in a)d!=PH.LOAD_PH_AFTER_EVENT&&PH.loadPlugins(d,"eager");b()}))["finally"](function(){PH.fire(PH.LOAD_PH_AFTER_EVENT)})},d=CH.cache(PH.CACHED_DESCRIPTOR_ID);U.un(d)?(a+=PH.EVENT_PLUGIN_JSON_FILE,CRUD.loadJSON(a,function(a){CH.cache(PH.CACHED_DESCRIPTOR_ID,
a);c(a)})):c(d)};
PH.loadPlugins=function(a,b,c){if(null==b||"eager"!=b&&"lazy"!=b)b="lazy";var d=CH.cache(PH.CACHED_DESCRIPTOR_ID);if(d.hasOwnProperty(a)){if(a=d[a],0<a.length){var e=function(a,b,c,d){null==d&&(d=0);a.length>d?(plugin=a[d],(plugin.hasOwnProperty("load")&&plugin.load==b||!plugin.hasOwnProperty("load")&&"lazy"==b)&&plugin.hasOwnProperty("package")&&plugin.hasOwnProperty("plugin")?(a[d].load="done",PH.loadPlugin(plugin,function(){d++;e(a,b,c,d)})):(d++,e(a,b,c,d))):U.un(c)||c()};e(a,b,c)}}else U.un(c)||
c()};PH.loadPlugin=function(a,b){PH.loadPluginConfiguration(a,function(){U.loadjs(PH.root+a["package"]+"/client/"+a.plugin+".js",b)})};PH.add=function(a,b){var c=a.events;if(U.un(c)||0==c.length)PH.wrappedRun(a,b,null);else for(var d=null,e=0;e<c.length;e++)d=c[e],U.un(PH.events[d])&&(PH.events[d]=[]),PH.events[d].push(a)};
PH.loadPluginConfiguration=function(a,b){var c=CH.cache(PH.CACHED_CONFIGURATIONS_ID),d=a["package"]+"."+a.plugin;c.hasOwnProperty(d)?b(a):CRUD.loadJSON(PH.root+"/"+a["package"]+"/configuration.json",function(e){c[d]=e;CH.cache(PH.CACHED_CONFIGURATIONS_ID,c);b(a)})};PH.fire=function(a,b,c){PH.loadPlugins(a,"lazy",function(){if(PH.events.hasOwnProperty(a))for(var d=PH.events[a],e=null,f=0;f<d.length;f++)e=d[f],PH.wrappedRun(e,b,a,c);else U.un(c)||c(b)})};
PH.wrappedRun=function(a,b,c,d){PH.fire(a.id+"-before",b,function(b){(new Promise(function(d,h){PH.fire(a.id+"-in-process",b);var g=CH.cache(PH.CACHED_CONFIGURATIONS_ID)[a.id];U.un(g)&&(g={});try{var k=a.run(b,g,c);d(k)}catch(l){h("error_plugin_execution.")}})).then(function(a){U.un(d)||d(a)},function(a){U.un(d)||d({success:!1,message:a})})["finally"](function(){PH.fire(a.id+"-after",b)})})};PH.getResourcePath=function(a){return PH.root+"/"+a["package"]+"/resources/"};function EM(){}EM.editors={};
EM.activeEditor=null;EM.popup=null;EM.popupBody=null;EM.field=null;EM.load=function(a,b){EM.field=b;U.un(EM.editors[a])?U.loadjs("/editor/"+a+".js"):EM.render(EM.editors[a])};EM.add=function(a,b){null!=b&&(EM.field=b);EM.editors[a.id]=a;EM.render(a)};
EM.render=function(a,b){null!=b&&(EM.field=b);if(null==EM.popup){var c=document.createElement("div");c.style.position="absolute";c.style.width="500px";c.style.height="500px";c.style.top="0px";c.style["background-color"]="#fff";c.style.border="2px solid #000";c.style.display="none";EM.popup=c;document.body.appendChild(c);var d=document.createElement("div");c.appendChild(d);EM.popupBody=d;d=document.createElement("div");d.innerHTML='<a href="javascript:EM.ok();">[OK]</a> <a href="javascript:EM.remove();">[Cancel]</a>';
c.appendChild(d)}EM.popupBody.innerHTML=a.getHTML(EM.field);a.run();EM.activeEditor=a;EM.popup.style.display="inline"};EM.formTemplate=function(a,b,c){CRUD.load(a,function(a){var e="",f=null,h;for(h in b){var f=b[h],g=a;for(h in f)g=g.replace(new RegExp("{{"+h+"}}","g"),f[h]);e+=g}c(e)})};EM.remove=function(){EM.popup.style.display="none";EM.popupBody.innerHTML="";EM.field=null;EM.activeEditor=null};EM.ok=function(){EM.activeEditor.setFieldValue(EM.field);EM.remove()};
function CH(a,b){"session"==a?CH.storage=window.sessionStorage:"local"==a&&(CH.storage=window.localStorage);CH.storage.CH_storage=a;CH.storage.CH_maxSize=b}CH.storage={};CH.objStorage={};CH.maxSize=1024;CH.cache=function(a,b){if(null==b)return U.un(CH.objStorage[a])?CH.storage[a]:CH.objStorage[a];var c=U.type(b);"object"==c||"array"==c?(CH.objStorage[a]=b,new Promise(function(c,e){CH.storage[a]=JSON.stringify(b);c()})):CH.storage[a]=b};
CH.clear=function(a){null==a?(CH.storage={},CH.objStorage={}):(delete CH.storage[a],delete CH.objStorage[a])};CH.parseObjects=function(){for(var a in CH.storage)try{CH.objStorage[a]=JSON.parse(CH.storage[a])}catch(b){}};function CRUD(){}CRUD.loadJSON=function(a,b,c){CRUD.load(a,b,!0,c)};
CRUD.load=function(a,b,c,d,e){var f;if("undefined"!==typeof XMLHttpRequest)f=new XMLHttpRequest;else for(var h=["MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"],g=0,k=h.length;g<k;g++)try{f=new ActiveXObject(h[g]);break}catch(l){}f.onreadystatechange=function(){if(!(4>f.readyState)&&200===f.status&&4===f.readyState)if(U.un(c))b(f.responseText);else try{b(JSON.parse(f.responseText))}catch(a){b({})}};U.un(d)&&(d="GET");f.open(d,a,!0);if(U.un(e))f.send();
else{a="";for(key in e)a+=encodeURIComponent(key)+"="+encodeURIComponent(e[key])+"&";f.send(a)}};
